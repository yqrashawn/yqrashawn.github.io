  <!DOCTYPE html>
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <meta charset="UTF-8">

  <meta name="author" content="yqrashawn" />
  <meta name="generator" content="lazyblorg" />
  <meta name="description" content="Switch Things Faster" />
  <meta name="orgmode-id" content="2018-10-03-switch-things-faster" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@yqrashawn" />
  <meta name="twitter:creator" content="@yqrashawn" />
  <meta name="twitter:title" content="infin" />
  <meta name="twitter:description" content="Switch Things Faster" />
  <meta name="twitter:image" content="//yqrashawn.com/public/img/YQ_logo.png" />

  <meta property="og:type" content="article" />
  <meta property="og:title" content="infin" />
  <meta property="og:description" content="Switch Things Faster" />
  <meta property="og:image" content="//yqrashawn.com/public/img/YQ_logo.png" />
  <meta property="og:site_name" content="infin - Web-page of yqrashawn">
  <meta property="article:published_time" content="2018-10-03T02:30+08:00" />
  <meta property="article:author" content="yqrashawn" />

  <link rel="stylesheet" title="infin Standard CSS Style"
        href="//yqrashawn.com/public/css/YQ.css" type="text/css" media="screen"  />

  <link rel="alternate" type="application/atom+xml"
        title="infin (links only)" href="//yqrashawn.com/feeds/lazyblorg-all.atom_1.0.links-only.xml" />
  <link rel="alternate" type="application/atom+xml"
        title="infin (article teasers)" href="//yqrashawn.com/feeds/lazyblorg-all.atom_1.0.links-and-teaser.xml" />
  <link rel="alternate" type="application/atom+xml"
        title="infin (full content)" href="//yqrashawn.com/feeds/lazyblorg-all.atom_1.0.links-and-content.xml" />
  <script type="text/javascript" src="//yqrashawn.com/public/js/highlight.pack.js"></script>
  <script type="text/javascript" src="//yqrashawn.com/public/js/menu.js"></script>

  <!-- WARNING: This page is written in HTML5 and might not be displayed correctly in old browsers. -->

      <!-- link rel="stylesheet" type="text/css" href="../../../../style.css" / -->
      <title>Switch Things Faster</title>

  </head>  <body>



	<header>

	  <nav class="temporal-article-header-nav">
	    <span class="breadcrumbs">
	      <a href="../../../../">infin</a><span style="padding-top:1em;">&nbsp;&nbsp;&nbsp;&nbsp;&raquo;
	      <a href="../../../">2018</a>&nbsp;&ndash;&nbsp;<a href="../../">10</a>&nbsp;&ndash;&nbsp;<a href="../">03</a></span>
	    </span>
	  </nav>
	  <aside class="common-tags">
	    <ul>
                <li><a class="usertag" href="//yqrashawn.com/tags/karabiner/">karabiner</a></li>
                <li><a class="usertag" href="//yqrashawn.com/tags/emacs/">emacs</a></li>
                <li><a class="usertag" href="//yqrashawn.com/tags/efficient/">efficient</a></li>
                <li><a class="usertag" href="//yqrashawn.com/tags/macos/">macos</a></li>
	    </ul>
	  </aside>

	  <h1 class="common-article-header-title">Switch Things Faster</h1>

	</header>

  
  <div class="menu-espanso">
    <div id="menu-group">
      <div id="menu" class="menu">
      <div id="menu-in" class="menu-in"></div>
      </div>
      <span class="menu-closer"></span>
      <span class="linee linea1"></span>
      <span class="linee linea2"></span>
      <span class="linee linea3"></span>
    </div>
    <div class="voci-menu">
      <ul>
         <a id="show-sidebar-text" href="#show-sidebar">Show Sidebar</a>
         <div class="sidebar toggle-sidebar">


           <ul>
           <li><a href="../../../../about">About</a></li>
           <li><a href="//duckduckgo.com/?q=site%3A+yqrashawn.com+++">Search infin</li>
           <li>Subscribe</li>
               <ul>
               <li><span style="font-size:small"><a href="//yqrashawn.com/feeds/lazyblorg-all.atom_1.0.links-only.xml">links only</a> (most reliable)</span></li>
               <li><span style="font-size:small"><a href="//yqrashawn.com/feeds/lazyblorg-all.atom_1.0.links-and-teaser.xml">article teaser</a></span></li>
               <li><span style="font-size:small"><a href="//yqrashawn.com/feeds/lazyblorg-all.atom_1.0.links-and-content.xml">full content</a></span></li>
               </ul>
           <li id="top-tags">Top <a href="//yqrashawn.com/tags/">tags</a>:</li>
               <ul class="top-tags-list">
                     
              <li><a class="usertag" href="//yqrashawn.com/tags/emacs">emacs</a> (8)</li>
              <li><a class="usertag" href="//yqrashawn.com/tags/macos">macos</a> (3)</li>
              <li><a class="usertag" href="//yqrashawn.com/tags/tool">tool</a> (3)</li>
              <li><a class="usertag" href="//yqrashawn.com/tags/karabiner">karabiner</a> (3)</li>
              <li><a class="usertag" href="//yqrashawn.com/tags/workspace">workspace</a> (2)</li>
              <li><a class="usertag" href="//yqrashawn.com/tags/efficient">efficient</a> (2)</li>
              <li><a class="usertag" href="//yqrashawn.com/tags/coding">coding</a> (2)</li>
              <li><a class="usertag" href="//yqrashawn.com/tags/shell">shell</a> (1)</li>
              <li><a class="usertag" href="//yqrashawn.com/tags/chinese">chinese</a> (1)</li>
              <li><a class="usertag" href="//yqrashawn.com/tags/watching">watching</a> (1)</li>
               </ul>
           </ul>
         </div>
      </ul>
    </div>
  </div>



  <article class="common-article">

<p>

Talking about buffer switching in emacs in the <a href="http://yqrashawn.com/2018/09/26/switch-buffer-in-emacs/">last post</a> , I said that I have keybindings to switch between the two and three most recent used buffers. And the author of the <a href="https://www.reddit.com/r/emacs/comments/9hmh8n/whats_your_preferred_method_of_switching_buffers/">reddit post</a> chose to use <a href="https://github.com/killdash9/buffer-flip.el">buffer-flip</a> package.

</p>

<p>

The buffer-flip package makes switching buffer like those switching applications behavior in operating system, like <code>alt-tab</code> in MS Windows and <code>command-tab</code> in macOS. VScode also can switch among opened files with <code>control-tab</code>. The problem of these methods are obvious. They can only switching in a specific order and they all bind to these uncomfortable keys.

</p>

<p>

For me there're two solutions.

</p>

	  <header><h2 class="section-title">Search + shortcuts for recent visited item</h2></header>

<p>

I already talk about the first solution, switching with packages like <code>ivy</code> or <code>helm</code>, or <code>alfred</code> or <code>contexts</code> on macOS, which you can switching by searching. Plus two shortcuts switching between the most recent two and three item, so that we don't need to press too much to just switch to prev item.

</p>

	  <header><h2 class="section-title">home-row shortcuts + smart trigger</h2></header>

<p>

There's another solution. It's very similar to editing text in emacs. When I want to change a word in current line, I got to move my cursor to that word. If the word is in the beginning or end of this line, I use <code>C-a</code> or <code>C-e</code> then maybe <code>C-f</code>, <code>C-b</code> to move to that word (I actually use evil keybindings). If it's in the middle of the line, I use <code>isearch</code>, <code>swiper</code> or <code>evil-fine-char</code> to that word.

</p>

<p>

It's the same when we switch buffer. Check the code first.

</p>

	  <div class="example_code">
	  <pre>
    <code>;; smart trigger function, if not in minibuffer, trigger ivy
;; if in minibuffer, do ivy actions
;; (there must be better way to identify if we are in ivy-switch-buffer context)
(defun +ivy-switch-buffer-next-line ()
  (interactive)
  (if (minibufferp) (ivy-next-line)
    (ivy-switch-buffer)))

(defun +ivy-switch-buffer-prevouse-line ()
  (interactive)
  (if (minibufferp) (ivy-previous-line)
    (ivy-switch-buffer)))

;; then we bind them to some key
(global-set-key (kbd "C-x C-9 l") #'ivy-alt-done)
(global-set-key (kbd "C-x C-9 j") '+ivy-switch-buffer-next-line)
(global-set-key (kbd "C-x C-9 k") '+ivy-switch-buffer-prevouse-line)
(global-set-key (kbd "C-x C-9 a" ) #'ivy-beginning-of-buffer)
(global-set-key (kbd "C-x C-9 e" ) #'ivy-end-of-buffer)
(global-set-key (kbd "C-x C-9 u" ) #'ivy-scroll-down-command)
(global-set-key (kbd "C-x C-9 d" ) #'ivy-scroll-up-command)    </code>
	  </pre>
    </div>

<p>

So this is unusable for now. Cause the keybindings are too hard and slow to reach. That's why we don't do these kind of configuration. We don't have enough key for this.

</p>

<p>

But what if we can make any key a modifier key like <code>control</code>, <code>alt</code> or <code>command</code>. There's <a href="https://pqrs.org/osx/karabiner/">karabiner</a> on macOS can make this happen. And I think this is doable on other operating systems as well.

</p>

	  <div class="example_code">
	  <pre>
    <code>{:applications {:Emacs ["^org\\.gnu\\.Emacs$"]} ;; let karabiner know which app is emacs
 :simlayer {:emacs-s-mode {:key :s :condi :Emacs}} ;; use s as modifer key only in emacs
 :mains [{:des "s-mode in emacs"
          :rules [:emacs-s-mode ;; bellow rebinds only works under :emacs-s-mode condition
                  [:j [:!Tx :!T9 :j]] ;; ivy-next-line or ivy-switch-buffer
                  [:k [:!Tx :!T9 :k]] ;; prev line
                  [:l [:!Tx :!T9 :l]] ;; ivy-alt-done
                  [:i [:!Tx :!T9 :a]] ;; top of ivy buffer
                  [:o [:!Tx :!T9 :e]] ;; bottom
                  [:o [:!Tx :!T9 :u]] ;; scroll up
                  [:o [:!Tx :!T9 :d]]]}]}    </code>
	  </pre>
    </div>

<p>

I have this <code>emacs-s-mode</code> use <code>s</code> key as a modifier key mapping <code>s+jklaeud</code> to <code>C-x C-9 jklaeud</code>. So when I want to switch buffer, I can just press <code>s+j/k</code> to trigger <code>ivy-switch-buffer</code> and keep pressing either of this key to find my buffer. Or use <code>s + u or d</code> to scroll quicker, <code>s+a/e</code> to go to the top and bottom of the list and <code>s+l</code> to select the buffer. I can always release <code>s</code> key and type to search the right buffer, without fearing releasing keys may select wrong buffer (happens when switching application with <code>command+tab</code>). And it won't switch to buffers between current one and target one making emacs rendering every buffer (buffer-flip behavior).

</p>

<p>

Note that the karabiner configuration above needs <a href="https://github.com/yqrashawn/GokuRakuJoudo">GokuRakuJoudo</a> to convert to the json format that karabiner can read, you can't use it directly.

</p>

<p>

If you know how to make normal keys as modifier key in other operating system, please let me know. I'll add them to this post.

</p>


  </article>
	  <aside class="published-on">
	    Published on <time datetime="2018-10-03T02:30+08:00">2018-10-03T02:30</time>
	  </aside>

   <p class="email-comment">
      <a href="mailto:hi@yqrashawn.com?subject=2018-10-03-switch-things-faster%20comment:%20&body=Please%20do%20not%20remove%20'2018-10-03-switch-things-faster%20comment:'%20in%20subject%20and%20please%20tell%20me%20whether%20or%20not%20it%20is%20OK%20to%20add%20your%20comment%20and%2For%20your%20email%20address%20to%20the%20blog%20entry!">Comment via email</a> or via <a href="//disqus.com">Disqus</a> comments below:
   </p>

    <div id="disqus_thread"></div>
    <div id="disqus_loader" style="text-align: center">
      <!-- stolen from http://blog.yjl.im/2012/04/let-your-readers-decide-when-to-load.html -->
      <button onclick="load_disqus()">Load Disqus Comments</button>
      <script>
        function load_disqus()
        {
          var dsq = document.createElement('script');
          dsq.type = 'text/javascript';
          dsq.async = true;
          dsq.src = "//yqrashawn.disqus.com/embed.js";
          var disqus_identifier = '2018-10-03-switch-things-faster';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          var ldr = document.getElementById('disqus_loader');
          ldr.parentNode.removeChild(ldr);
        }
      </script>
    </div>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">Disqus comments.</a></noscript>

    <footer>
      <p><i><a href="../../../../about">infin</a></i> is authored in <a href="//orgmode.org">Org-mode</a> and generated by <a href="https://github.com/novoid/lazyblorg">lazyblorg</a>

	 	&nbsp;&bull;&nbsp; <a href="//github.com/yqrashawn">Github</a>

	 	&nbsp;&bull;&nbsp; <a href="mailto:hi@yqrashawn.com">Mail</a>

	 	&nbsp;&bull;&nbsp; <a href="https://web.archive.org/web/*/yqrashawn.com/2018/10/03/switch-things-faster/">Archive</a>
      </p>
    </footer>

  </body>
</html>